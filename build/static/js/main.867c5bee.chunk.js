(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],{33:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},36:function(e,n,t){e.exports=t(76)},41:function(e,n,t){},42:function(e,n,t){},73:function(e,n){},76:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(32),i=t.n(r);t(41),t(33),t(42);var c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(43);var s=t(35),u=t(6),d=t(7),p=t(3),v=t(8),f=t(9),m={EMPTY:" ",X:"X",O:"O"},y=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(){var e;Object(u.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).state={},e.componentDidMount=function(){e.updateCanvas()},e.updateCanvas=function(){var n=e.refs.canvas;if(void 0!==n){var t=n.getContext("2d"),o=n.width,a=n.height;t.fillStyle="grey",t.fillRect(0,0,o,a),e.props.value!==m.X&&e.props.value!==m.O||(t.lineWidth=10,t.strokeStyle="red",e.props.value===m.X?e.drawX(t,o,a):e.props.value===m.O&&e.drawO(t,o,a))}},e}return Object(d.a)(t,[{key:"render",value:function(){return this.updateCanvas(),a.a.createElement("canvas",{class:"col",ref:"canvas",onClick:this.props.onClick})}},{key:"drawX",value:function(e,n,t){e.beginPath(),e.moveTo(0,0),e.lineTo(n,t),e.moveTo(0,t),e.lineTo(n,0),e.stroke()}},{key:"drawO",value:function(e,n,t){e.beginPath(),e.moveTo(0,t/2),e.bezierCurveTo(0,t,n,t,n,t/2),e.bezierCurveTo(n,0,0,0,0,t/2),e.stroke()}}]),t}(o.Component),h=function(e,n,t){return a.a.createElement("div",{className:"row"},n.slice(3*e,3*e+3).map((function(n,o){return a.a.createElement("div",{className:"col col-4",key:3*e+o+"_div"},a.a.createElement(y,{value:n,key:3*e+o,onClick:function(){return t(3*e+o)}}))})))},b=function(e,n){return a.a.createElement("div",{className:"container"},[0,1,2].map((function(t){return h(t,e,n)})))},w=t(34),g=t.n(w),k=function(e){Object(f.a)(t,e);var n=Object(v.a)(t);function t(){var e;Object(u.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=n.call.apply(n,[this].concat(a))).state={field:new Array(9).fill(m.EMPTY),headline:"waiting for opponent",player_symbol:void 0,opponent_symbol:void 0,player_name:void 0,opponent_name:void 0,socket:void 0,yourTurn:!1,isOver:!1},e.onclick=function(n){e.state.yourTurn?e.makeMove(n):window.alert("Not your turn!")},e.makeMove=function(n){Object(p.a)(e).state.field[n]===m.EMPTY&&(e.updateMoveToField(n),e.transmitMove(n),e.swapTurn()),e.isOver()},e.updateMoveToField=function(n){var t=Object(p.a)(e).state,o=Object(s.a)(t.field);o[n]=t.yourTurn?t.player_symbol:t.opponent_symbol,e.setState({field:o})},e.transmitMove=function(n){var t=Object(p.a)(e).state;void 0!==t.socket&&t.yourTurn&&t.socket.emit("move.made",{cell_id:n})},e.swapTurn=function(){var n=e.state.yourTurn;e.setState({headline:e.currentTurnHeadline(!n),yourTurn:!n})},e.currentTurnHeadline=function(e){return e?"your turn":"opponents turn"},e.isOver=function(){var n=e.didSomeBodyWin();n!==m.EMPTY?e.setState({headline:"Player "+n+" won!",isOver:!0}):e.full()&&e.setState({headline:"Draw!",isOver:!0})},e.didSomeBodyWin=function(){for(var n=e.state.field,t=["XXX","OOO"],o=[n[0]+n[1]+n[2],n[3]+n[4]+n[5],n[6]+n[7]+n[8],n[0]+n[3]+n[6],n[1]+n[4]+n[7],n[2]+n[5]+n[8],n[0]+n[4]+n[8],n[2]+n[4]+n[6]],a=0;a<o.length;a++)if(o[a]===t[0]||o[a]===t[1])return o[a].charAt(0);return m.EMPTY},e.full=function(){return!e.state.field.map((function(e){return e===m.EMPTY})).includes(!0)},e}return Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,n=g()(window.location.origin);n.emit("player_data",{player_name:"justin"}),n.on("move.made",(function(n){return e.makeMove(n.cell_id)})),n.on("get.opponent.name",(function(n){return e.setState({opponent_name:n.opponent_name})})),n.on("game.begin",(function(n){return e.setPlayer(n)})),this.setState({socket:n,player_name:"justin"})}},{key:"setPlayer",value:function(e){var n;e.symbol===m.X?(n=!0,this.setState({player_symbol:e.symbol,opponent_symbol:m.O,yourTurn:!0})):(n=!1,this.setState({player_symbol:m.O,opponent_symbol:m.X,yourTurn:!1})),this.setState({headline:"Game starts, "+this.currentTurnHeadline(n)}),e.opponent_name&&this.setState({opponent_name:e.opponent_name})}},{key:"render",value:function(){var e=this.state;return a.a.createElement("div",{className:"container"},a.a.createElement("h1",{class:"text-center",key:"headline"},e.headline),a.a.createElement("br",null),b(e.field,this.onclick),a.a.createElement("div",{className:"text"}," ","Hello ",e.player_name,"! ",a.a.createElement("br",null),"Your are ",e.player_symbol,a.a.createElement("br",null),"Opponent: ",e.opponent_name," ",a.a.createElement("br",null),"Opponent is ",e.opponent_symbol))}}]),t}(o.Component);i.a.render(a.a.createElement(k,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");c?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var o=t.headers.get("content-type");404===t.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(n,e)}))}}()}},[[36,1,2]]]);
//# sourceMappingURL=main.867c5bee.chunk.js.map